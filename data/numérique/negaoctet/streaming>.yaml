index:
  formule:
    somme:
      - terminaux
      - transmission
      - data center
  unité: gCO2e

qualité:
  avec:
    SD:
    HD:
    ultra HD:
      titre: 4K
  titre: qualité de la vidéo
  question: Quelle est la qualité de la vidéo ?
  formule:
    une possibilité:
      choix obligatoire: oui
      possibilités:
        - SD
        - HD
        - ultra HD
  par défaut: "'HD'"

qualité . facteur qualité:
  formule:
    variations:
      - si: qualité = 'SD'
        alors: 0.7
      - si: qualité = 'HD'
        alors: 3
      - si: qualité = 'ultra HD'
        alors: 7
  unité: Go/heure

durée:
  titre: Temps de visionnage
  question: Quelle est la durée de la vidéo ?
  par défaut: 60
  unité: minute

durée en heure:
  formule: durée / 60
  unité: heure

taille:
  titre: Taille de la vidéo
  formule: durée en heure * qualité . facteur qualité
  unité: Go

terminaux:
  formule:
    somme:
      - construction
      - usage
  unité: gCO2e

appareil:
  avec:
    ordinateur et écran:
      titre: ordinateur fixe
    ordinateur portable:
    tablette:
    smartphone:
    TV:
  question: Quel appareil utlisez-vous ?
  formule:
    une possibilité:
      choix obligatoire: oui
      possibilités:
        - ordinateur et écran
        - ordinateur portable
        - tablette
        - smartphone
        - TV
    par défaut: "'moyenne'" # default value has to be set to make sure rules using "appareil" are defined

appareil . moyenne utilisation ordinateur et écran: 0%
appareil . moyenne utilisation ordinateur portable: 15%
appareil . moyenne utilisation tablette: 10%
appareil . moyenne utilisation smartphone: 5%
appareil . moyenne utilisation TV: 70%

terminaux . construction:
  formule:
    variations:
      - si: appareil = 'smartphone'
        alors: smartphone
      - si: appareil = 'tablette'
        alors: tablette
      - si: appareil = 'ordinateur portable'
        alors: ordinateur portable
      - si: appareil = 'TV'
        alors: TV
      - si: appareil = 'ordinateur et écran'
        alors: ordinateur et écran
      - sinon: construction moyenne
  unité: gCO2e

terminaux . construction . smartphone:
  formule: smartphone . construction * (durée en heure / smartphone . durée d'usage)

terminaux . construction . tablette:
  formule: tablette . construction * (durée en heure / tablette . durée d'usage)

terminaux . construction . ordinateur portable:
  formule: ordinateur portable . construction * (durée en heure / ordinateur portable . durée d'usage)

terminaux . construction . TV:
  formule: TV . construction * (durée en heure / TV . durée d'usage)

terminaux . construction . ordinateur et écran:
  formule:
    somme:
      - ordinateur fixe . construction * (durée en heure / ordinateur fixe . durée d'usage)
      - écran . construction * (durée en heure / écran . durée d'usage)

terminaux . construction . construction moyenne:
  formule:
    somme:
      - appareil . moyenne utilisation ordinateur et écran * ordinateur et écran
      - appareil . moyenne utilisation ordinateur portable * ordinateur portable
      - appareil . moyenne utilisation tablette * tablette
      - appareil . moyenne utilisation smartphone * smartphone
      - appareil . moyenne utilisation TV * TV

terminaux . usage:
  formule: consommation électricité * facteur électricité
  unité: gCO2e

terminaux . usage . facteur électricité:
  formule:
    variations:
      - si: région = 'France'
        alors: électricité . FE France
      - si: région = 'Europe'
        alors: électricité . FE Europe
      - si: région = 'Chine'
        alors: électricité . FE Chine
      - si: région = 'USA'
        alors: électricité . FE USA
  unité: gCO2e/kWh

terminaux . usage . région:
  avec:
    France:
    Europe:
    Chine:
    USA:
  question: Dans quelle zone géographique se situe le terminal ?
  formule:
    une possibilité:
      choix obligatoire: oui
      possibilités:
        - France
        - Europe
        - Chine
        - USA
  par défaut: "'France'"

terminaux . usage . consommation électricité:
  formule: durée en heure * consommation électricité par heure / 1000
  unité: kWh

terminaux . usage . consommation électricité par heure:
  formule:
    variations:
      - si: appareil = 'smartphone'
        alors: smartphone . consommation en mode actif
      - si: appareil = 'tablette'
        alors: tablette . consommation en mode actif
      - si: appareil = 'ordinateur portable'
        alors: ordinateur portable . consommation en mode actif
      - si: appareil = 'ordinateur et écran'
        alors: ordinateur et écran . consommation en mode actif
      - si: appareil = 'TV'
        alors: TV . consommation en mode actif
      - sinon: consommation en mode actif moyenne
  unité: Wh

terminaux . usage . consommation en mode actif moyenne:
  formule:
    somme:
      - appareil . moyenne utilisation ordinateur et écran * ordinateur et écran . consommation en mode actif
      - appareil . moyenne utilisation ordinateur portable * ordinateur portable . consommation en mode actif
      - appareil . moyenne utilisation tablette * tablette . consommation en mode actif
      - appareil . moyenne utilisation smartphone * smartphone . consommation en mode actif
      - appareil . moyenne utilisation TV * TV . consommation en mode actif

transmission:
  formule: facteur réseau * taille
  unité: gCO2e

transmission . facteur réseau:
  formule:
    variations:
      - si: réseau = 'fixe FR'
        alors: facteur réseau fixe FR
      - si: réseau = 'mobile FR'
        alors: facteur réseau mobile FR
      - si: réseau = 'fixe EU'
        alors: facteur réseau fixe EU
      - si: réseau = 'mobile EU'
        alors: facteur réseau mobile EU
  unité: gCO2e/Go

transmission . réseau:
  avec:
    fixe FR:
    mobile FR:
    fixe EU:
    mobile EU:
  question: Utilisez-vous le réseau fixe ou mobile ?
  formule:
    une possibilité:
      choix obligatoire: oui
      possibilités:
        - fixe FR
        - mobile FR
        - fixe EU
        - mobile EU
  par défaut: "'fixe FR'"

data center:
  formule:
    somme:
      - construction
      - usage
  unité: gCO2e

data center . construction:
  formule: 0.237
  unité: gCO2e
  note: Durée, taille, réseau ou localisation n'ont pas d'impact sur ce poste.

data center . usage:
  formule: consommation électricité * facteur électricité
  unité: gCO2e

data center . usage . facteur électricité:
  formule:
    variations:
      - si: région = 'France'
        alors: électricité . FE France
      - si: région = 'Europe'
        alors: électricité . FE Europe
      - si: région = 'Chine'
        alors: électricité . FE Chine
      - si: région = 'USA'
        alors: électricité . FE USA
  unité: gCO2e/kWh

data center . usage . région:
  avec:
    France:
    Europe:
    Chine:
    USA:
  question: Dans quelle zone géographique se situe le data center ?
  formule:
    une possibilité:
      choix obligatoire: oui
      possibilités:
        - France
        - Europe
        - Chine
        - USA
  par défaut: "'France'"

data center . usage . consommation électricité:
  formule: taille * électricité par Go en Wh / 1000
  unité: kWh

data center . usage . électricité par Go en Wh:
  formule: électricité par Go * 1000000
  unité: Wh/Go

data center . usage . électricité par Go:
  formule: (électricité directe consommée par an + électricité indirecte consommée par an) / volume total de transfert de données
  unité: MWh/Go

data center . usage . électricité directe consommée par an:
  formule: 94000
  unité: MWh
  référence: Netflix Environmental Social Governance 2019

data center . usage . électricité indirecte consommée par an:
  formule: 357000
  unité: MWh
  référence: Netflix Environmental Social Governance 2019

data center . usage . consommation de donnée moyenne par heure de visionnage:
  formule: 1.9
  unité: Go
  référence: |
    "Factcheck: What is the carbon footprint of streaming video on Netflix?" CarbonBrief

data center . usage . nombre d'utilisateurs par an:
  formule: 167000000
  référence: |
    "Factcheck: What is the carbon footprint of streaming video on Netflix?" CarbonBrief

data center . usage . nombre d'heures de visionnage par an:
  formule: 2 * 365 * nombre d'utilisateurs par an
  note: |
    On a ici une hypothèse importante: les utilisateurs passeraient 2 heures sur Netflix par jour en moyenne.
  référence: |
    "Factcheck: What is the carbon footprint of streaming video on Netflix?" CarbonBrief

data center . usage . volume total de transfert de données:
  formule: nombre d'heures de visionnage par an * consommation de donnée moyenne par heure de visionnage
